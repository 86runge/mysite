define(["validation"],function(){return{id:"register",init:function(){$("#get_verify_code").on("click",function(){var e=$.get_code();alert(e),console.log(e),$("#get_code").val(e),$("#id_verify_code").val("")}),$("#form_register").validate({ignore:"#get_code",rules:{username:{required:!0,isUsername:!0},password:{required:!0,isPassword:!0},again_password:{required:!0,equalTo:"#id_password"},phone:{required:!0,isMobile:!0},email:{isEmail:!0},verify_code:{required:!0,equalTo:"#get_code"}},messages:{username:{required:"请输入用户名"},password:{required:"请输入密码"},again_password:{required:"请再次输入密码",equalTo:"两次输入的密码不一致"},phone:{required:"请输入电话号码"},verify_code:{required:"请输入验证码",equalTo:"验证码输入错误"}},submitHandler:function(){$.ajax({url:"/eshop/register/",type:"post",dataType:"json",data:{username:$("#id_username").val(),password:$("#id_password").val(),nick:$("#id_nick").val(),phone:$("#id_phone").val(),email:$("#id_email").val(),verify_code:$("#id_verify_code").val(),csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},headers:{Accept:"application/json, text/html/, application/xhtml+xml; charset=utf-8"},success:function(){alert("恭喜你，注册成功！")},error:function(){alert("发生错误")}})}})}}});