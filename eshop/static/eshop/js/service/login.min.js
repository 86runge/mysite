define(["validation"],function(){return{init:function(){$("#form_login").validate({rules:{username:{required:!0},password:{required:!0}},messages:{username:{required:"请输入用户名"},password:{required:"请输入密码"}},submitHandler:function(){$.ajax({url:"/eshop/login/",type:"post",dataType:"json",data:{username:$("#id_username").val(),password:$("#id_password").val(),csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},headers:{Accept:"application/json, text/html/, application/xhtml+xml; charset=utf-8"},success:function(e){alert("登录成功"),e.status&&(location.href="http://"+location.host)},error:function(){alert("发生错误")}})}})}}});