define([],function(){return{init:function(){$(".J_update_user").on("click",function(){var e=$(this).parents("tr").attr("data-id");$("#update_id").val(e),$.ajax({url:"/backend/user_manage/",type:"post",data:{id:e,action:"get_user",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},dataType:"json",success:function(e){$("#id_nick").val(e.nick),$("#id_username").val(e.username),$("#id_password").attr("placeholder","需要修改密码请输入新密码"),$("#id_phone").val(e.phone),$("#id_email").val(e.email),e.is_active?$("#is_active_yes").prop("checked",!0):$("#is_active_no").prop("checked",!0),$("#submit_add_user").hide(),$("#submit_update_user").show(),$("#user_manage_modal").find(".modal-title").text("修改用户"),$("#user_manage_modal").modal({backdrop:"static",keyboard:!1})},error:function(e){console.log("发生错误"),console.log(e)}})}),$("#submit_update_user").on("click",function(){var e=$("#update_id").val();a("update_user",e),$("#form_user_manage").submit()});var a=function(a,n){$("#form_user_manage").validate({rules:{nick:{required:!0},username:{required:!0,isUsername:!0},phone:{required:!0,isMobile:!0},email:{isEmail:!0}},messages:{nick:{required:"请输入员工姓名"},username:{required:"请输入登录名"},phone:{required:"请输入员工电话"}},submitHandler:function(){var e=new FormData($("#form_user_manage")[0]);e.append("action",a),e.append("id",n),e.append("csrfmiddlewaretoken",$("input[name=csrfmiddlewaretoken]").val()),$.ajax({url:"/backend/user_manage/",type:"post",data:e,dataType:"json",contentType:!1,processData:!1,success:function(e){alert(e.msg),$("#user_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})}})};$(".J_delete_user").on("click",function(){var e=$(this).parents("tr").attr("data-id");$.ajax({url:"/backend/user_manage/",type:"post",data:{id:e,action:"delete_user",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},dataType:"json",success:function(e){alert(e.msg),$("#user_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})})}}});