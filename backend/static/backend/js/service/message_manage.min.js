define([],function(){return{init:function(){$("#add_message").on("click",function(){$("#message_manage_modal").find(".modal-title").text("添加消息"),$("#form_message_manage")[0].reset(),$("label.error").hide(),$("#submit_add_message").show(),$("#submit_update_message").hide(),$("#message_manage_modal").modal({backdrop:"static",keyboard:!1})}),$("#submit_add_message").on("click",function(){a("add_message",""),$("#form_message_manage").submit()}),$(".J_update_message").on("click",function(){var e=$(this).parents("tr").attr("data-id");$("#update_id").val(e),$.ajax({url:"/backend/message_manage/",type:"post",data:{id:e,action:"get_message",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},dataType:"json",success:function(e){$("#id_msg_group").val(e.msg_group),$("#id_msg_title").val(e.msg_title),$("#id_msg_note").val(e.msg_note),$("#id_msg_start").val(e.msg_start),$("#id_msg_end").val(e.msg_end),$("#submit_add_message").hide(),$("#submit_update_message").show(),$("#message_manage_modal").find(".modal-title").text("修改消息"),$("#message_manage_modal").modal({backdrop:"static",keyboard:!1})},error:function(e){console.log("发生错误"),console.log(e)}})}),$("#submit_update_message").on("click",function(){var e=$("#update_id").val();a("update_message",e),$("#form_message_manage").submit()});var a=function(a,s){$("#form_message_manage").validate({rules:{msg_group:{required:!0},msg_title:{required:!0},msg_note:{required:!0}},messages:{msg_group:{required:"请选择消息分组"},msg_title:{required:"请输入消息标题"},msg_note:{required:"请输入消息内容"}},submitHandler:function(){var e=new FormData($("#form_message_manage")[0]);e.append("action",a),e.append("id",s),e.append("csrfmiddlewaretoken",$("input[name=csrfmiddlewaretoken]").val()),$.ajax({url:"/backend/message_manage/",type:"post",data:e,dataType:"json",contentType:!1,processData:!1,success:function(e){alert(e.msg),$("#message_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})}})};$(".J_delete_message").on("click",function(){var e=$(this).parents("tr").attr("data-id");$.ajax({url:"/backend/role_manage/",type:"post",data:{id:e,action:"delete_message",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},dataType:"json",success:function(e){alert(e.msg),$("#message_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})})}}});