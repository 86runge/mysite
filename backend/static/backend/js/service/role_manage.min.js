define([],function(){return{init:function(){$("#add_permission").on("click",function(){$("#permission_manage_modal").find(".modal-title").text("添加权限"),$("#submit_add_permission").show(),$("#submit_update_permission").hide(),$("#permission_manage_modal").modal({backdrop:"static",keyboard:!1})}),$("#submit_add_permission").on("click",function(){a("add_permission",""),$("#form_permission_manage").submit()}),$(".J_update_permission").on("click",function(){var e=$(this).parents("tr").attr("data-id");$("#update_id").val(e),$.ajax({url:"/backend/role_manage/",type:"post",data:{id:e,action:"get_permission",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},dataType:"json",success:function(e){$("#id_p_name").val(e.name),$("#id_content_type").val(e.content_type),$("#id_codename").val(e.codename),$("#submit_add_permission").hide(),$("#submit_update_permission").show(),$("#permission_manage_modal").find(".modal-title").text("修改权限"),$("#permission_manage_modal").modal({backdrop:"static",keyboard:!1})},error:function(e){console.log("发生错误"),console.log(e)}})}),$("#submit_update_permission").on("click",function(){var e=$("#update_id").val();a("update_permission",e),$("#form_permission_manage").submit()});var a=function(a,o){$("#form_permission_manage").validate({rules:{name:{required:!0},content_type:{required:!0},codename:{required:!0}},messages:{name:{required:"请输入权限名"},content_type:{required:"请选择归属类型"},codename:{required:"请输入权限码"}},submitHandler:function(){var e=new FormData($("#form_permission_manage")[0]);e.append("action",a),e.append("id",o),e.append("csrfmiddlewaretoken",$("input[name=csrfmiddlewaretoken]").val()),$.ajax({url:"/backend/role_manage/",type:"post",data:e,dataType:"json",contentType:!1,processData:!1,success:function(e){alert(e.msg),$("#permission_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})}})};$(".J_delete_permission").on("click",function(){var e=$(this).parents("tr").attr("data-id");$.ajax({url:"/backend/role_manage/",type:"post",data:{id:e,action:"delete_permission",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},dataType:"json",success:function(e){alert(e.msg),$("#permission_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})}),$("#add_group").on("click",function(){$("#group_manage_modal").find(".modal-title").text("添加用户群"),$("#submit_add_group").show(),$("#submit_update_group").hide(),$("#group_manage_modal").modal({backdrop:"static",keyboard:!1})}),$("#submit_add_group").on("click",function(){o("add_group",""),$("#form_group_manage").submit()}),$(".J_update_group").on("click",function(){var e=$(this).parents("tr").attr("data-id");$("#update_id").val(e),$.ajax({url:"/backend/role_manage/",type:"post",data:{id:e,action:"get_group",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},dataType:"json",success:function(e){$("#id_g_name").val(e.name),$("#id_g_notes").val(e.notes),e.is_active?$("#g_active_yes").prop("checked",!0):$("#g_active_no").prop("checked",!0),$("#submit_add_group").hide(),$("#submit_update_group").show(),$("#group_manage_modal").find(".modal-title").text("修改用户群"),$("#group_manage_modal").modal({backdrop:"static",keyboard:!1})},error:function(e){console.log("发生错误"),console.log(e)}})}),$("#submit_update_group").on("click",function(){var e=$("#update_id").val();o("update_group",e),$("#form_group_manage").submit()});var o=function(a,o){$("#form_group_manage").validate({rules:{name:{required:!0},permissions:{required:!0}},messages:{name:{required:"请输入群名称"},permissions:{required:"请选择群权限"}},submitHandler:function(){var e=new FormData($("#form_group_manage")[0]);e.append("action",a),e.append("id",o),e.append("csrfmiddlewaretoken",$("input[name=csrfmiddlewaretoken]").val()),$.ajax({url:"/backend/role_manage/",type:"post",data:e,dataType:"json",contentType:!1,processData:!1,success:function(e){alert(e.msg),$("#group_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})}})};$(".J_delete_group").on("click",function(){var e=$(this).parents("tr").attr("data-id");$.ajax({url:"/backend/role_manage/",type:"post",data:{id:e,action:"delete_group",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},dataType:"json",success:function(e){alert(e.msg),$("#group_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})}),$("#add_role").on("click",function(){$("#role_manage_modal").find(".modal-title").text("添加角色"),$("#submit_add_role").show(),$("#submit_update_role").hide(),$("#role_manage_modal").modal({backdrop:"static",keyboard:!1})}),$("#submit_add_role").on("click",function(){n("add_role",""),$("#form_role_manage").submit()}),$(".J_update_role").on("click",function(){var e=$(this).parents("tr").attr("data-id");$("#update_id").val(e),$.ajax({url:"/backend/role_manage/",type:"post",data:{id:e,action:"get_role",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},dataType:"json",success:function(e){console.log(e),$("#id_r_name").val(e.name),e.is_active?$("#r_active_yes").prop("checked",!0):$("#r_active_no").prop("checked",!0),$("#id_r_notes").val(e.notes),$("#submit_add_role").hide(),$("#submit_update_role").show(),$("#role_manage_modal").find(".modal-title").text("修改角色"),$("#role_manage_modal").modal({backdrop:"static",keyboard:!1})},error:function(e){console.log("发生错误"),console.log(e)}})}),$("#submit_update_role").on("click",function(){var e=$("#update_id").val();n("update_role",e),$("#form_role_manage").submit()});var n=function(a,o){$("#form_role_manage").validate({rules:{name:{required:!0},groups:{required:!0}},messages:{name:{required:"请输入角色名"},groups:{required:"请选择群组"}},submitHandler:function(){var e=new FormData($("#form_role_manage")[0]);e.append("action",a),e.append("id",o),e.append("csrfmiddlewaretoken",$("input[name=csrfmiddlewaretoken]").val()),$.ajax({url:"/backend/role_manage/",type:"post",data:e,dataType:"json",contentType:!1,processData:!1,success:function(e){alert(e.msg),$("#role_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})}})};$(".J_delete_role").on("click",function(){var e=$(this).parents("tr").attr("data-id");$.ajax({url:"/backend/role_manage/",type:"post",data:{id:e,action:"delete_role",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},dataType:"json",success:function(e){alert(e.msg),$("#role_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})}),$("#add_department").on("click",function(){$("#department_manage_modal").find(".modal-title").text("添加权限"),$("#submit_add_department").show(),$("#submit_update_department").hide(),$("#department_manage_modal").modal({backdrop:"static",keyboard:!1})}),$("#submit_add_department").on("click",function(){t("add_department",""),$("#form_department_manage").submit()}),$(".J_update_department").on("click",function(){var e=$(this).parents("tr").attr("data-id");$("#update_id").val(e),$.ajax({url:"/backend/role_manage/",type:"post",data:{id:e,action:"get_department",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},dataType:"json",success:function(e){$("#id_d_name").val(e.name),e.is_active?$("#d_active_yes").prop("checked",!0):$("#d_active_no").prop("checked",!0),$("#id_d_notes").val(e.notes),$("#submit_add_department").hide(),$("#submit_update_department").show(),$("#department_manage_modal").find(".modal-title").text("修改权限"),$("#department_manage_modal").modal({backdrop:"static",keyboard:!1})},error:function(e){console.log("发生错误"),console.log(e)}})}),$("#submit_update_department").on("click",function(){var e=$("#update_id").val();t("update_department",e),$("#form_department_manage").submit()});var t=function(a,o){$("#form_department_manage").validate({rules:{name:{required:!0}},messages:{name:{required:"请输入部门名称"}},submitHandler:function(){var e=new FormData($("#form_department_manage")[0]);e.append("action",a),e.append("id",o),e.append("csrfmiddlewaretoken",$("input[name=csrfmiddlewaretoken]").val()),$.ajax({url:"/backend/role_manage/",type:"post",data:e,dataType:"json",contentType:!1,processData:!1,success:function(e){alert(e.msg),$("#department_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})}})};$(".J_delete_department").on("click",function(){var e=$(this).parents("tr").attr("data-id");$.ajax({url:"/backend/role_manage/",type:"post",data:{id:e,action:"delete_department",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},dataType:"json",success:function(e){alert(e.msg),$("#department_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})})}}});