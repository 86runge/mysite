define(["datetimepicker"],function(){return{init:function(){$("#id_delivery_time").datetimepicker(),$("#id_online_time").datetimepicker(),$("#id_offline_time").datetimepicker(),$("#id_photo").on("click",function(){$("#id_good_photo").click()}),$("#add_good").on("click",function(){$(".modal-title").text("添加商品"),$("#submit_add_good").show(),$("#submit_update_good").hide(),$("#good_manage_modal").modal({backdrop:"static",keyboard:!1})}),$("#submit_add_good").on("click",function(){e("add_good",""),$("#form_good_manage").submit()});var e=function(i,o){$("#id_photo").val($("#id_good_photo").val()),$("#form_good_manage").validate({ignore:"#id_good_photo",rules:{name:{required:!0},price:{required:!0,isPrice:!0},bit:{required:!0},photo:{required:!0},preorder_limit:{required:!0,isNumber:!0},delivery_time:{required:!0},online_time:{required:!0},offline_time:{required:!0},refund_rate:{required:!0,isNumber:!0}},messages:{name:{required:"请输入商品名"},price:{required:"请输入商品价格"},bit:{required:"请输入商品货号"},photo:{required:"请上传商品主图"},preorder_limit:{required:"预购数量限制"},delivery_time:{required:"请选择发货时间"},online_time:{required:"请选择上架时间"},offline_time:{required:"请选择下架时间"},refund_rate:{required:"请输入退款比率"}},submitHandler:function(){var e=new FormData($("#form_good_manage")[0]);e.append("action",i),e.append("id",o),e.append("csrfmiddlewaretoken",$("input[name=csrfmiddlewaretoken]").val()),$.ajax({url:"/backend/goods_list/",type:"post",data:e,dataType:"json",contentType:!1,processData:!1,success:function(e){alert("操作成功"),$("#staff_manage_modal").modal("hide"),window.location.reload()},error:function(e){console.log("发生错误"),console.log(e)}})}})}}}});