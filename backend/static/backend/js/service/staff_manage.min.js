define([],function(){return{init:function(){$("#add_staff").on("click",function(){$("#staff_manage_modal").find(".modal-title").text("添加用户"),$("#form_staff_manage")[0].reset(),$("label.error").hide(),$("#staff_manage_modal").modal({backdrop:"static",keyboard:!1})}),$(".J_update_staff").on("click",function(){var a=$(this).parents("tr").attr("data-id");$.ajax({url:"/backend/staff_manage/",type:"post",data:{id:a,action:"get_staff",csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()},success:function(a){console.log(a),$("#staff_manage_modal").find(".modal-title").text("修改用户"),$("#staff_manage_modal").modal({backdrop:"static",keyboard:!1})},error:function(a){console.log("发生错误"),console.log(a)}})}),$("#form_staff_manage").validate({rules:{nick:{required:!0},username:{required:!0,isUsername:!0},password:{required:!0,isPassword:!0},phone:{required:!0,isMobile:!0},email:{isEmail:!0}},messages:{nick:{required:"请输入员工姓名"},username:{required:"请输入登录名"},password:{required:"请输入登录密码"},phone:{required:"请输入员工电话"}},submitHandler:function(){var a=new FormData($("#form_staff_manage")[0]);a.append("action","add_staff"),a.append("csrfmiddlewaretoken",$("input[name=csrfmiddlewaretoken]").val()),console.log(a),$.ajax({url:"/backend/staff_manage/",type:"post",data:a,dataType:"json",contentType:!1,processData:!1,success:function(a){alert("添加成功"),$("#staff_manage_modal").modal("hide")},error:function(a){console.log("发生错误"),console.log(a)}})}}),$("#submit_staff_manage").on("click",function(){$("#form_staff_manage").submit()})}}});